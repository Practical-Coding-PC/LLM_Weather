# 🌤️ 날씨 챗봇 API (기상청 공식 데이터 기반)

기상청 공식 API를 활용하여 정확한 날씨 정보를 제공하는 AI 챗봇입니다.

## 🚀 주요 기능

- **정확한 날씨 정보**: 기상청 공식 초단기실황/예보 데이터 활용
- **지능적 대화**: Gemini AI를 통한 자연스러운 대화
- **다양한 지역 지원**: 춘천, 노원, 서울 등 주요 도시
- **시간별 예보**: "6시간 후 날씨" 같은 구체적 요청 처리
- **대화 기록 저장**: 채팅 세션 및 메시지 이력 관리

## 🗺️ 지원 지역

| 지역 | 격자좌표 (nx, ny) | 정식명칭 |
|------|------------------|----------|
| 춘천 | 73, 134 | 강원도 춘천시 |
| 노원 | 61, 128 | 서울특별시 노원구 |
| 서울 | 60, 127 | 서울특별시 |
| 부산 | 98, 76 | 부산광역시 |
| 대구 | 89, 90 | 대구광역시 |
| 인천 | 55, 124 | 인천광역시 |
| 광주 | 58, 74 | 광주광역시 |
| 대전 | 67, 100 | 대전광역시 |

## ⚙️ 설정

### 1. 환경 변수 설정

`.env` 파일에 다음 API 키들을 설정하세요:

```bash
# Gemini AI API (필수)
GEMINI_API_KEY=your_gemini_api_key_here

# 기상청 Open API (필수 - 정확한 날씨 정보용)
KMA_SERVICE_KEY=your_kma_service_key_here

# 기타
KAKAO_REST_API_KEY=your_kakao_api_key_here
```

### 2. API 키 발급 방법

#### 기상청 API 키
1. [공공데이터포털](https://www.data.go.kr) 접속
2. 회원가입 후 로그인
3. "기상청41_단기예보 조회서비스" 검색
4. 활용신청 → 승인 후 인증키 확인

#### Gemini API 키
1. [Google AI Studio](https://makersuite.google.com/app/apikey) 접속
2. "Create API Key" 클릭
3. 발급받은 키를 환경 변수에 설정

## 🏃‍♂️ 실행 방법

### 개발 환경
```bash
# 의존성 설치
pip install -r requirements.txt

# 서버 실행
python chatbot_app.py
```

### 프로덕션 환경
```bash
# start.sh 실행 권한 부여
chmod +x start.sh

# 서버 시작
./start.sh
```

## 📡 API 엔드포인트

### 채팅 API
```http
POST /api/chat
Content-Type: application/json

{
    "message": "춘천 날씨 어때?",
    "user_id": "user123",
    "chat_id": null
}
```

### 지원 지역 조회
```http
GET /api/locations
```

### 헬스 체크
```http
GET /health
```

## 💬 사용 예시

### 현재 날씨 조회
- "춘천 날씨 어때?"
- "노원 현재 기온은?"
- "서울 습도 알려줘"

### 예보 조회
- "6시간 후 춘천 날씨는?"
- "내일 노원 비 올까?"
- "앞으로 3시간 서울 예보"

### 상세 정보
- "춘천 날씨 자세히 알려줘"
- "노원 종합 날씨 정보"

## 🧠 AI 기능

- **지역 인식**: 메시지에서 자동으로 지역명 추출
- **시간 분석**: "N시간 후" 같은 시간 표현 해석
- **맥락 이해**: 사용자 의도에 맞는 적절한 날씨 정보 제공
- **자연스러운 대화**: 이모지와 친근한 말투로 응답

## 🔧 기술 스택

- **Backend**: FastAPI, Python 3.8+
- **AI**: Google Gemini 1.5 Flash
- **Weather API**: 기상청 공식 Open API
- **Database**: SQLite (채팅 기록 저장)
- **Deployment**: Uvicorn, Docker 지원

## 📊 데이터 정확성

- **기상청 공식 데이터**: 정부 공인 날씨 정보
- **실시간 업데이트**: 매시간 최신 데이터 반영
- **다양한 기상 요소**: 기온, 습도, 강수, 바람 등
- **Fallback 시스템**: API 장애 시 네이버 크롤링으로대체

## 🚨 주의사항

1. **API 할당량**: 기상청 API는 일일 사용량 제한이 있습니다
2. **지역 제한**: 현재 한국 내 주요 도시만 지원
3. **예보 범위**: 초단기예보는 최대 6시간까지 제공

## 🔄 업데이트 계획

- [ ] 더 많은 지역 추가
- [ ] 장기 예보 지원 (단기예보 API 활용)
- [ ] 날씨 알림 기능
- [ ] 모바일 앱 연동
- [ ] 다국어 지원

---

**개발자**: LLM_Weather Team  
**버전**: 2.0.0  
**최종 업데이트**: 2025.05.29
